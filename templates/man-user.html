{% extends 'layouts.html' %}

{% block title %}
	Manajemen User
{% endblock %}

{% block body %}

<div class="row">


<!--alert area -->
{% with messages = get_flashed_messages() %}
	{% if messages %}
		{% for message in messages %}
			<div class="col-lg-12">
				<div class="alert alert-warning alert-dismissable" role="alert">
					<button type="button" class="close" data-dismiss="alert" aria-label="close">
						<span aria-hidden="true">&times;</span>
					</button>
					{{ message }}
				</div>
			</div>
		{% endfor %}
	{% endif %}
{% endwith %}


<form id="form" name="form" role="form" method="post" action="{{url_for('manUser')}}" enctype="multipart/form-data">
	{{ form.csrf_token }}
	{{ form.tx_id }}

	<div class="col-lg-6">
		<div class="panel panel-default">
			<div class="panel-body">
					<div class="form-group">
						{{ form.tx_user.label }} {{ form.tx_user(class='form-control') }}
						{%for message in form.tx_user.errors%}<div class="alert alert-danger alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>{{message}}</div>{%endfor%}
					</div>
					<div class="form-group">
						{{ form.tx_nama.label }} {{ form.tx_nama(class='form-control') }}
						{%for message in form.tx_nama.errors%}<div class="alert alert-danger alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>{{message}}</div>{%endfor%}
					</div>
					<div class="form-group">
						{{ form.tx_pass.label }} {{ form.tx_pass(class='form-control') }}
						{%for message in form.tx_pass.errors%}<div class="alert alert-danger alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>{{message}}</div>{%endfor%}
					</div>
					<div class="form-group">
						{{ form.tx_telp.label }} {{ form.tx_telp(class='form-control') }}
						{%for message in form.tx_telp.errors%}<div class="alert alert-danger alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>{{message}}</div>{%endfor%}
					</div>
			</div>
		</div>
	</div>

	<div class="col-lg-6">
		<div class="panel panel-default">
			<div class="panel-body">
					<div class="form-group">
						{{ form.tx_mail.label }} {{ form.tx_mail(class='form-control') }}
						{%for message in form.tx_mail.errors%}<div class="alert alert-danger alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>{{message}}</div>{%endfor%}
					</div>
					<div class="form-group">
						{{ form.op_divisi.label }} {{ form.op_divisi(class='form-control') }}
						{%for message in form.op_divisi.errors%}<div class="alert alert-danger alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>{{message}}</div>{%endfor%}
					</div>
					<div class="form-group">
						{{ form.op_role.label }} {{ form.op_role(class='form-control') }}
						{%for message in form.op_role.errors%}<div class="alert alert-danger alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>{{message}}</div>{%endfor%}
					</div>
					<div class="form-group">
						{{ form.tx_jabatan.label }} {{ form.tx_jabatan(class='form-control') }}
						{%for message in form.tx_jabatan.errors%}<div class="alert alert-danger alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>{{message}}</div>{%endfor%}
					</div>
					<div class="form-group">
						<input type="submit" class="btn btn-outline btn-primary btn-lg btn-block" name="" value="Simpan" />
					</div>

			</div>
		</div>
	</div>

</form>

</div>
<div class="row">	
	<div class="col-lg-12">
		<div class="panel panel-default">
			<div class="panel-heading">Tabel Data User</div><!-- /.panel-heading -->
			<div class="panel-body">

				<table width="100%" class="table table-striped table-bordered table-hover" id="dataTables-example">
					<thead>
						<tr>
							<th>#</th>
							<th>Username</th>
							<th>Nama Lengkap</th>
							<th>Telp</th>
							<th>Email</th>
							<th>Divisi</th>
							<th>Hak Masuk</th>
							<th>Jabatan</th>
							<th>Controller</th>
						</tr>
					</thead>
					<tbody>

					{% set cnt = [1] %}
					{% for row in data %}
					<tr class="odd gradeX">
						<td>{{ cnt[0] }}</td>
						<td>{{ row[0] }}</td>
						<td>{{ row[1] }}</td>
						<td>{{ row[3] }}</td>
						<td>{{ row[4] }}</td>
						<td>{{ row[5] }}</td>
						<td>{{ row[6] }}</td>
						<td>{{ row[7] }}</td>
						<td>
							<a href="/manUser?id={{ row[0] }}" class="btn-sm btn-warning btn-outline btn-block" title="Ubah"><i class="fa fa-pencil fa-fw"></i></a>
							<a href="/hapusUser?id={{ row[0] }}" class="btn-sm btn-danger btn-outline btn-block" title="Hapus" ><i class="fa fa-times-circle-o fa-fw"></i></a>
						</td>
					</tr>
					{% if cnt.append(cnt.pop() + 1) %}{% endif %}
					{% endfor %}

					</tbody>
				</table>

			</div>
		</div>		
	</div>
</div>


<script type="text/javascript">
	/*console.log("Aplikasi pertama menggunakan flask python.");*/
    $(document).ready(function() {
        $('#dataTables-example').DataTable({
            responsive: true
        });
    });
</script>

{% endblock %}